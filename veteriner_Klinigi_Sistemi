--
-- PostgreSQL database dump
--

\restrict MaSVQK7XXNYFqzju6lb20Qlg1KHsYjHNJkrWt94srtqDORcltZSQVuBJ1qrMIOw

-- Dumped from database version 18.0
-- Dumped by pg_dump version 18.0

-- Started on 2026-02-12 01:00:16

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 243 (class 1255 OID 17238)
-- Name: fn_asi_sonraki_doz(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_asi_sonraki_doz() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF NEW.SonrakiDozTarihi IS NULL THEN
        NEW.SonrakiDozTarihi := NEW.AsiTarihi + INTERVAL '1 year';
    END IF;

    RETURN NEW;
END;
$$;


ALTER FUNCTION public.fn_asi_sonraki_doz() OWNER TO postgres;

--
-- TOC entry 245 (class 1255 OID 17241)
-- Name: sp_musteri_toplam_fatura(integer); Type: PROCEDURE; Schema: public; Owner: postgres
--

CREATE PROCEDURE public.sp_musteri_toplam_fatura(IN p_musteri_id integer, OUT toplam_tutar numeric)
    LANGUAGE plpgsql
    AS $$
BEGIN
    SELECT COALESCE(SUM(Tutar), 0)
    INTO toplam_tutar
    FROM Fatura
    WHERE MusteriID = p_musteri_id;
END;
$$;


ALTER PROCEDURE public.sp_musteri_toplam_fatura(IN p_musteri_id integer, OUT toplam_tutar numeric) OWNER TO postgres;

--
-- TOC entry 244 (class 1255 OID 17240)
-- Name: sp_randevu_ekle(timestamp without time zone, integer, integer); Type: PROCEDURE; Schema: public; Owner: postgres
--

CREATE PROCEDURE public.sp_randevu_ekle(IN p_tarih timestamp without time zone, IN p_musteri_id integer, IN p_veteriner_id integer)
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO Randevu (Tarih, MusteriID, PersonelID)
    VALUES (p_tarih, p_musteri_id, p_veteriner_id);
END;
$$;


ALTER PROCEDURE public.sp_randevu_ekle(IN p_tarih timestamp without time zone, IN p_musteri_id integer, IN p_veteriner_id integer) OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 222 (class 1259 OID 16996)
-- Name: barinak; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.barinak (
    barinakid integer NOT NULL,
    adres text NOT NULL
);


ALTER TABLE public.barinak OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16995)
-- Name: barinak_barinakid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.barinak_barinakid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.barinak_barinakid_seq OWNER TO postgres;

--
-- TOC entry 5157 (class 0 OID 0)
-- Dependencies: 221
-- Name: barinak_barinakid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.barinak_barinakid_seq OWNED BY public.barinak.barinakid;


--
-- TOC entry 227 (class 1259 OID 17027)
-- Name: evcilhayvan; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.evcilhayvan (
    hayvanid integer NOT NULL,
    isim character varying(50) NOT NULL,
    yas integer,
    musteriid integer NOT NULL,
    barinakid integer
);


ALTER TABLE public.evcilhayvan OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 17026)
-- Name: evcilhayvan_hayvanid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.evcilhayvan_hayvanid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.evcilhayvan_hayvanid_seq OWNER TO postgres;

--
-- TOC entry 5158 (class 0 OID 0)
-- Dependencies: 226
-- Name: evcilhayvan_hayvanid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.evcilhayvan_hayvanid_seq OWNED BY public.evcilhayvan.hayvanid;


--
-- TOC entry 234 (class 1259 OID 17089)
-- Name: fatura; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.fatura (
    faturaid integer NOT NULL,
    tutar numeric(10,2) NOT NULL,
    tarih date NOT NULL,
    musteriid integer NOT NULL
);


ALTER TABLE public.fatura OWNER TO postgres;

--
-- TOC entry 233 (class 1259 OID 17088)
-- Name: fatura_faturaid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.fatura_faturaid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.fatura_faturaid_seq OWNER TO postgres;

--
-- TOC entry 5159 (class 0 OID 0)
-- Dependencies: 233
-- Name: fatura_faturaid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.fatura_faturaid_seq OWNED BY public.fatura.faturaid;


--
-- TOC entry 240 (class 1259 OID 17172)
-- Name: hayvanasi; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.hayvanasi (
    hayvanid integer NOT NULL,
    asino integer NOT NULL,
    asiadi character varying(100) NOT NULL,
    asitarihi date NOT NULL,
    sonrakidoztarihi date,
    personelid integer NOT NULL
);


ALTER TABLE public.hayvanasi OWNER TO postgres;

--
-- TOC entry 232 (class 1259 OID 17080)
-- Name: ilac; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ilac (
    ilacid integer NOT NULL,
    isim character varying(100) NOT NULL,
    doz character varying(50)
);


ALTER TABLE public.ilac OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 17079)
-- Name: ilac_ilacid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.ilac_ilacid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.ilac_ilacid_seq OWNER TO postgres;

--
-- TOC entry 5160 (class 0 OID 0)
-- Dependencies: 231
-- Name: ilac_ilacid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.ilac_ilacid_seq OWNED BY public.ilac.ilacid;


--
-- TOC entry 228 (class 1259 OID 17046)
-- Name: kedi; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.kedi (
    hayvanid integer NOT NULL,
    irk character varying(50),
    tuyrengi character varying(30)
);


ALTER TABLE public.kedi OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 17007)
-- Name: klinikpersoneli; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.klinikpersoneli (
    personelid integer NOT NULL,
    adsoyad character varying(100) NOT NULL,
    gorev character varying(50),
    maas numeric(10,2),
    rol character varying(30)
);


ALTER TABLE public.klinikpersoneli OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 17006)
-- Name: klinikpersoneli_personelid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.klinikpersoneli_personelid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.klinikpersoneli_personelid_seq OWNER TO postgres;

--
-- TOC entry 5161 (class 0 OID 0)
-- Dependencies: 223
-- Name: klinikpersoneli_personelid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.klinikpersoneli_personelid_seq OWNED BY public.klinikpersoneli.personelid;


--
-- TOC entry 229 (class 1259 OID 17057)
-- Name: kopek; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.kopek (
    hayvanid integer NOT NULL,
    irk character varying(50)
);


ALTER TABLE public.kopek OWNER TO postgres;

--
-- TOC entry 230 (class 1259 OID 17068)
-- Name: kus; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.kus (
    hayvanid integer NOT NULL,
    irk character varying(50),
    tuyrengi character varying(30)
);


ALTER TABLE public.kus OWNER TO postgres;

--
-- TOC entry 236 (class 1259 OID 17105)
-- Name: muayene; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.muayene (
    muayeneid integer NOT NULL,
    tarih date NOT NULL,
    teshis text,
    hayvanid integer NOT NULL,
    personelid integer NOT NULL,
    faturaid integer
);


ALTER TABLE public.muayene OWNER TO postgres;

--
-- TOC entry 235 (class 1259 OID 17104)
-- Name: muayene_muayeneid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.muayene_muayeneid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.muayene_muayeneid_seq OWNER TO postgres;

--
-- TOC entry 5162 (class 0 OID 0)
-- Dependencies: 235
-- Name: muayene_muayeneid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.muayene_muayeneid_seq OWNED BY public.muayene.muayeneid;


--
-- TOC entry 237 (class 1259 OID 17134)
-- Name: muayeneilac; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.muayeneilac (
    muayeneid integer NOT NULL,
    ilacid integer NOT NULL
);


ALTER TABLE public.muayeneilac OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 16986)
-- Name: musteri; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.musteri (
    musteriid integer NOT NULL,
    ad character varying(50) NOT NULL,
    soyad character varying(50) NOT NULL,
    telefon character varying(20)
);


ALTER TABLE public.musteri OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16985)
-- Name: musteri_musteriid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.musteri_musteriid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.musteri_musteriid_seq OWNER TO postgres;

--
-- TOC entry 5163 (class 0 OID 0)
-- Dependencies: 219
-- Name: musteri_musteriid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.musteri_musteriid_seq OWNED BY public.musteri.musteriid;


--
-- TOC entry 239 (class 1259 OID 17152)
-- Name: randevu; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.randevu (
    randevuid integer NOT NULL,
    tarih timestamp without time zone NOT NULL,
    musteriid integer NOT NULL,
    personelid integer NOT NULL
);


ALTER TABLE public.randevu OWNER TO postgres;

--
-- TOC entry 238 (class 1259 OID 17151)
-- Name: randevu_randevuid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.randevu_randevuid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.randevu_randevuid_seq OWNER TO postgres;

--
-- TOC entry 5164 (class 0 OID 0)
-- Dependencies: 238
-- Name: randevu_randevuid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.randevu_randevuid_seq OWNED BY public.randevu.randevuid;


--
-- TOC entry 225 (class 1259 OID 17015)
-- Name: veteriner; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.veteriner (
    personelid integer NOT NULL,
    uzmanlik character varying(100)
);


ALTER TABLE public.veteriner OWNER TO postgres;

--
-- TOC entry 242 (class 1259 OID 17233)
-- Name: vw_asitakip; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.vw_asitakip AS
 SELECT eh.hayvanid,
    eh.isim AS hayvanadi,
    (((mu.ad)::text || ' '::text) || (mu.soyad)::text) AS musteriadi,
    ha.asiadi,
    ha.asitarihi,
    ha.sonrakidoztarihi,
    kp.adsoyad AS veterineradi,
        CASE
            WHEN (ha.sonrakidoztarihi < CURRENT_DATE) THEN 'Gecikmiş'::text
            ELSE 'Zamanında'::text
        END AS asidurumu
   FROM (((public.hayvanasi ha
     JOIN public.evcilhayvan eh ON ((ha.hayvanid = eh.hayvanid)))
     JOIN public.musteri mu ON ((eh.musteriid = mu.musteriid)))
     JOIN public.klinikpersoneli kp ON ((ha.personelid = kp.personelid)));


ALTER VIEW public.vw_asitakip OWNER TO postgres;

--
-- TOC entry 241 (class 1259 OID 17228)
-- Name: vw_muayenedetay; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.vw_muayenedetay AS
 SELECT m.muayeneid,
    eh.isim AS hayvanadi,
    (((mu.ad)::text || ' '::text) || (mu.soyad)::text) AS musteriadi,
    kp.adsoyad AS veterineradi,
    m.tarih AS muayenetarihi,
    m.teshis,
    f.tutar AS faturatutari
   FROM ((((public.muayene m
     JOIN public.evcilhayvan eh ON ((m.hayvanid = eh.hayvanid)))
     JOIN public.musteri mu ON ((eh.musteriid = mu.musteriid)))
     JOIN public.klinikpersoneli kp ON ((m.personelid = kp.personelid)))
     LEFT JOIN public.fatura f ON ((m.faturaid = f.faturaid)));


ALTER VIEW public.vw_muayenedetay OWNER TO postgres;

--
-- TOC entry 4927 (class 2604 OID 16999)
-- Name: barinak barinakid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.barinak ALTER COLUMN barinakid SET DEFAULT nextval('public.barinak_barinakid_seq'::regclass);


--
-- TOC entry 4929 (class 2604 OID 17030)
-- Name: evcilhayvan hayvanid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.evcilhayvan ALTER COLUMN hayvanid SET DEFAULT nextval('public.evcilhayvan_hayvanid_seq'::regclass);


--
-- TOC entry 4931 (class 2604 OID 17092)
-- Name: fatura faturaid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fatura ALTER COLUMN faturaid SET DEFAULT nextval('public.fatura_faturaid_seq'::regclass);


--
-- TOC entry 4930 (class 2604 OID 17083)
-- Name: ilac ilacid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ilac ALTER COLUMN ilacid SET DEFAULT nextval('public.ilac_ilacid_seq'::regclass);


--
-- TOC entry 4928 (class 2604 OID 17010)
-- Name: klinikpersoneli personelid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.klinikpersoneli ALTER COLUMN personelid SET DEFAULT nextval('public.klinikpersoneli_personelid_seq'::regclass);


--
-- TOC entry 4932 (class 2604 OID 17108)
-- Name: muayene muayeneid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.muayene ALTER COLUMN muayeneid SET DEFAULT nextval('public.muayene_muayeneid_seq'::regclass);


--
-- TOC entry 4926 (class 2604 OID 16989)
-- Name: musteri musteriid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.musteri ALTER COLUMN musteriid SET DEFAULT nextval('public.musteri_musteriid_seq'::regclass);


--
-- TOC entry 4933 (class 2604 OID 17155)
-- Name: randevu randevuid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.randevu ALTER COLUMN randevuid SET DEFAULT nextval('public.randevu_randevuid_seq'::regclass);


--
-- TOC entry 5133 (class 0 OID 16996)
-- Dependencies: 222
-- Data for Name: barinak; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.barinak (barinakid, adres) FROM stdin;
1	Erzurum Merkez Barınak
2	Ankara Hayvan Bakımevi
3	Trabzon Ortahisar Barınağı
\.


--
-- TOC entry 5138 (class 0 OID 17027)
-- Dependencies: 227
-- Data for Name: evcilhayvan; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.evcilhayvan (hayvanid, isim, yas, musteriid, barinakid) FROM stdin;
1	Pamuk	3	1	1
4	Maviş	1	4	3
5	Tekir	4	5	\N
17	karamen	4	4	2
18	boncuk	2	2	\N
6	Duman	8	1	2
\.


--
-- TOC entry 5145 (class 0 OID 17089)
-- Dependencies: 234
-- Data for Name: fatura; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.fatura (faturaid, tutar, tarih, musteriid) FROM stdin;
1	400.00	2025-01-10	1
2	550.00	2025-01-11	2
3	300.00	2025-01-12	3
4	650.00	2025-01-13	4
5	500.00	2025-01-14	5
6	450.00	2025-01-15	6
7	700.00	2025-01-16	7
8	350.00	2025-01-17	8
\.


--
-- TOC entry 5151 (class 0 OID 17172)
-- Dependencies: 240
-- Data for Name: hayvanasi; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.hayvanasi (hayvanid, asino, asiadi, asitarihi, sonrakidoztarihi, personelid) FROM stdin;
1	1	Kuduz	2025-01-05	2026-01-05	1
1	2	Gençlik	2025-01-20	2025-07-20	2
4	1	Kuş Gribi	2025-01-18	2026-01-18	2
5	1	İç Parazit	2025-01-22	2025-04-22	1
17	1	Kuduz	2025-01-08	2026-01-08	3
\.


--
-- TOC entry 5143 (class 0 OID 17080)
-- Dependencies: 232
-- Data for Name: ilac; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ilac (ilacid, isim, doz) FROM stdin;
1	Antibiyotik	5 ml
2	Ağrı Kesici	1 tablet
3	Aşı Takviyesi	2 ml
4	Vitamin	10 ml
5	Parazit İlacı	3 ml
\.


--
-- TOC entry 5139 (class 0 OID 17046)
-- Dependencies: 228
-- Data for Name: kedi; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.kedi (hayvanid, irk, tuyrengi) FROM stdin;
1	Van Kedisi	Beyaz
5	Tekir	Gri
\.


--
-- TOC entry 5135 (class 0 OID 17007)
-- Dependencies: 224
-- Data for Name: klinikpersoneli; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.klinikpersoneli (personelid, adsoyad, gorev, maas, rol) FROM stdin;
1	Dr. Ahmet Kaya	Veteriner	30000.00	Veteriner
2	Dr. Selin Yıldız	Veteriner	32000.00	Veteriner
3	Dr. Murat Aksoy	Veteriner	31000.00	Veteriner
4	Ayşe Koç	Sekreter	18000.00	Çalışan
5	Melih Karagöl	Yönetici	40000.00	Yönetici
\.


--
-- TOC entry 5140 (class 0 OID 17057)
-- Dependencies: 229
-- Data for Name: kopek; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.kopek (hayvanid, irk) FROM stdin;
6	Akbaş
\.


--
-- TOC entry 5141 (class 0 OID 17068)
-- Dependencies: 230
-- Data for Name: kus; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.kus (hayvanid, irk, tuyrengi) FROM stdin;
4	Muhabbet Kuşu	Mavi
\.


--
-- TOC entry 5147 (class 0 OID 17105)
-- Dependencies: 236
-- Data for Name: muayene; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.muayene (muayeneid, tarih, teshis, hayvanid, personelid, faturaid) FROM stdin;
1	2025-01-10	Genel kontrol	1	1	1
4	2025-01-13	Sindirim problemi	4	1	4
5	2025-01-14	Parazit kontrolü	5	2	5
6	2025-01-15	Tüy dökülmesi	6	3	6
\.


--
-- TOC entry 5148 (class 0 OID 17134)
-- Dependencies: 237
-- Data for Name: muayeneilac; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.muayeneilac (muayeneid, ilacid) FROM stdin;
1	4
1	2
4	5
5	5
6	4
\.


--
-- TOC entry 5131 (class 0 OID 16986)
-- Dependencies: 220
-- Data for Name: musteri; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.musteri (musteriid, ad, soyad, telefon) FROM stdin;
1	Ali	Yılmaz	05551112233
2	Ayşe	Demir	05552223344
4	Zeynep	Çelik	05554445566
5	Can	Arslan	05555556677
6	Elif	Koç	05556667788
7	Burak	Şahin	05557778899
8	Deniz	Aydın	05558889900
9	Karahan	Ziya	55558761480
3	Murat	Kaya	05553334455
\.


--
-- TOC entry 5150 (class 0 OID 17152)
-- Dependencies: 239
-- Data for Name: randevu; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.randevu (randevuid, tarih, musteriid, personelid) FROM stdin;
1	2025-02-10 14:30:00	1	1
2	2025-02-15 10:00:00	2	2
3	2025-02-15 10:00:00	2	2
7	2025-12-26 03:43:55	1	1
8	2026-04-11 03:50:39	2	2
9	2025-12-29 05:17:31.60434	2	3
10	2025-12-29 15:34:46.562294	3	2
11	2025-06-01 09:00:00	3	2
12	2026-01-30 10:41:15	4	3
\.


--
-- TOC entry 5136 (class 0 OID 17015)
-- Dependencies: 225
-- Data for Name: veteriner; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.veteriner (personelid, uzmanlik) FROM stdin;
1	Genel Veterinerlik
2	Cerrahi
3	Egzotik Hayvanlar
\.


--
-- TOC entry 5165 (class 0 OID 0)
-- Dependencies: 221
-- Name: barinak_barinakid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.barinak_barinakid_seq', 3, true);


--
-- TOC entry 5166 (class 0 OID 0)
-- Dependencies: 226
-- Name: evcilhayvan_hayvanid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.evcilhayvan_hayvanid_seq', 18, true);


--
-- TOC entry 5167 (class 0 OID 0)
-- Dependencies: 233
-- Name: fatura_faturaid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.fatura_faturaid_seq', 8, true);


--
-- TOC entry 5168 (class 0 OID 0)
-- Dependencies: 231
-- Name: ilac_ilacid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ilac_ilacid_seq', 5, true);


--
-- TOC entry 5169 (class 0 OID 0)
-- Dependencies: 223
-- Name: klinikpersoneli_personelid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.klinikpersoneli_personelid_seq', 5, true);


--
-- TOC entry 5170 (class 0 OID 0)
-- Dependencies: 235
-- Name: muayene_muayeneid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.muayene_muayeneid_seq', 6, true);


--
-- TOC entry 5171 (class 0 OID 0)
-- Dependencies: 219
-- Name: musteri_musteriid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.musteri_musteriid_seq', 8, true);


--
-- TOC entry 5172 (class 0 OID 0)
-- Dependencies: 238
-- Name: randevu_randevuid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.randevu_randevuid_seq', 12, true);


--
-- TOC entry 4937 (class 2606 OID 17005)
-- Name: barinak barinak_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.barinak
    ADD CONSTRAINT barinak_pkey PRIMARY KEY (barinakid);


--
-- TOC entry 4943 (class 2606 OID 17035)
-- Name: evcilhayvan evcilhayvan_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.evcilhayvan
    ADD CONSTRAINT evcilhayvan_pkey PRIMARY KEY (hayvanid);


--
-- TOC entry 4953 (class 2606 OID 17098)
-- Name: fatura fatura_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fatura
    ADD CONSTRAINT fatura_pkey PRIMARY KEY (faturaid);


--
-- TOC entry 4963 (class 2606 OID 17181)
-- Name: hayvanasi hayvanasi_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hayvanasi
    ADD CONSTRAINT hayvanasi_pkey PRIMARY KEY (hayvanid, asino);


--
-- TOC entry 4951 (class 2606 OID 17087)
-- Name: ilac ilac_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ilac
    ADD CONSTRAINT ilac_pkey PRIMARY KEY (ilacid);


--
-- TOC entry 4945 (class 2606 OID 17051)
-- Name: kedi kedi_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kedi
    ADD CONSTRAINT kedi_pkey PRIMARY KEY (hayvanid);


--
-- TOC entry 4939 (class 2606 OID 17014)
-- Name: klinikpersoneli klinikpersoneli_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.klinikpersoneli
    ADD CONSTRAINT klinikpersoneli_pkey PRIMARY KEY (personelid);


--
-- TOC entry 4947 (class 2606 OID 17062)
-- Name: kopek kopek_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kopek
    ADD CONSTRAINT kopek_pkey PRIMARY KEY (hayvanid);


--
-- TOC entry 4949 (class 2606 OID 17073)
-- Name: kus kus_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kus
    ADD CONSTRAINT kus_pkey PRIMARY KEY (hayvanid);


--
-- TOC entry 4955 (class 2606 OID 17118)
-- Name: muayene muayene_faturaid_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.muayene
    ADD CONSTRAINT muayene_faturaid_key UNIQUE (faturaid);


--
-- TOC entry 4957 (class 2606 OID 17116)
-- Name: muayene muayene_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.muayene
    ADD CONSTRAINT muayene_pkey PRIMARY KEY (muayeneid);


--
-- TOC entry 4959 (class 2606 OID 17140)
-- Name: muayeneilac muayeneilac_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.muayeneilac
    ADD CONSTRAINT muayeneilac_pkey PRIMARY KEY (muayeneid, ilacid);


--
-- TOC entry 4935 (class 2606 OID 16994)
-- Name: musteri musteri_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.musteri
    ADD CONSTRAINT musteri_pkey PRIMARY KEY (musteriid);


--
-- TOC entry 4961 (class 2606 OID 17161)
-- Name: randevu randevu_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.randevu
    ADD CONSTRAINT randevu_pkey PRIMARY KEY (randevuid);


--
-- TOC entry 4941 (class 2606 OID 17020)
-- Name: veteriner veteriner_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.veteriner
    ADD CONSTRAINT veteriner_pkey PRIMARY KEY (personelid);


--
-- TOC entry 4980 (class 2620 OID 17239)
-- Name: hayvanasi trg_asi_sonraki_doz; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trg_asi_sonraki_doz BEFORE INSERT ON public.hayvanasi FOR EACH ROW EXECUTE FUNCTION public.fn_asi_sonraki_doz();


--
-- TOC entry 4978 (class 2606 OID 17182)
-- Name: hayvanasi fk_asi_hayvan; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hayvanasi
    ADD CONSTRAINT fk_asi_hayvan FOREIGN KEY (hayvanid) REFERENCES public.evcilhayvan(hayvanid) ON DELETE CASCADE;


--
-- TOC entry 4979 (class 2606 OID 17187)
-- Name: hayvanasi fk_asi_veteriner; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hayvanasi
    ADD CONSTRAINT fk_asi_veteriner FOREIGN KEY (personelid) REFERENCES public.veteriner(personelid) ON DELETE RESTRICT;


--
-- TOC entry 4970 (class 2606 OID 17099)
-- Name: fatura fk_fatura_musteri; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fatura
    ADD CONSTRAINT fk_fatura_musteri FOREIGN KEY (musteriid) REFERENCES public.musteri(musteriid) ON DELETE CASCADE;


--
-- TOC entry 4965 (class 2606 OID 17041)
-- Name: evcilhayvan fk_hayvan_barinak; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.evcilhayvan
    ADD CONSTRAINT fk_hayvan_barinak FOREIGN KEY (barinakid) REFERENCES public.barinak(barinakid) ON DELETE SET NULL;


--
-- TOC entry 4966 (class 2606 OID 17036)
-- Name: evcilhayvan fk_hayvan_musteri; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.evcilhayvan
    ADD CONSTRAINT fk_hayvan_musteri FOREIGN KEY (musteriid) REFERENCES public.musteri(musteriid) ON DELETE CASCADE;


--
-- TOC entry 4967 (class 2606 OID 17052)
-- Name: kedi fk_kedi_hayvan; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kedi
    ADD CONSTRAINT fk_kedi_hayvan FOREIGN KEY (hayvanid) REFERENCES public.evcilhayvan(hayvanid) ON DELETE CASCADE;


--
-- TOC entry 4968 (class 2606 OID 17063)
-- Name: kopek fk_kopek_hayvan; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kopek
    ADD CONSTRAINT fk_kopek_hayvan FOREIGN KEY (hayvanid) REFERENCES public.evcilhayvan(hayvanid) ON DELETE CASCADE;


--
-- TOC entry 4969 (class 2606 OID 17074)
-- Name: kus fk_kus_hayvan; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kus
    ADD CONSTRAINT fk_kus_hayvan FOREIGN KEY (hayvanid) REFERENCES public.evcilhayvan(hayvanid) ON DELETE CASCADE;


--
-- TOC entry 4974 (class 2606 OID 17146)
-- Name: muayeneilac fk_mi_ilac; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.muayeneilac
    ADD CONSTRAINT fk_mi_ilac FOREIGN KEY (ilacid) REFERENCES public.ilac(ilacid) ON DELETE CASCADE;


--
-- TOC entry 4975 (class 2606 OID 17141)
-- Name: muayeneilac fk_mi_muayene; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.muayeneilac
    ADD CONSTRAINT fk_mi_muayene FOREIGN KEY (muayeneid) REFERENCES public.muayene(muayeneid) ON DELETE CASCADE;


--
-- TOC entry 4971 (class 2606 OID 17129)
-- Name: muayene fk_muayene_fatura; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.muayene
    ADD CONSTRAINT fk_muayene_fatura FOREIGN KEY (faturaid) REFERENCES public.fatura(faturaid) ON DELETE SET NULL;


--
-- TOC entry 4972 (class 2606 OID 17119)
-- Name: muayene fk_muayene_hayvan; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.muayene
    ADD CONSTRAINT fk_muayene_hayvan FOREIGN KEY (hayvanid) REFERENCES public.evcilhayvan(hayvanid) ON DELETE CASCADE;


--
-- TOC entry 4973 (class 2606 OID 17124)
-- Name: muayene fk_muayene_veteriner; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.muayene
    ADD CONSTRAINT fk_muayene_veteriner FOREIGN KEY (personelid) REFERENCES public.veteriner(personelid) ON DELETE RESTRICT;


--
-- TOC entry 4976 (class 2606 OID 17162)
-- Name: randevu fk_randevu_musteri; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.randevu
    ADD CONSTRAINT fk_randevu_musteri FOREIGN KEY (musteriid) REFERENCES public.musteri(musteriid) ON DELETE CASCADE;


--
-- TOC entry 4977 (class 2606 OID 17167)
-- Name: randevu fk_randevu_veteriner; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.randevu
    ADD CONSTRAINT fk_randevu_veteriner FOREIGN KEY (personelid) REFERENCES public.veteriner(personelid) ON DELETE RESTRICT;


--
-- TOC entry 4964 (class 2606 OID 17021)
-- Name: veteriner fk_veteriner_personel; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.veteriner
    ADD CONSTRAINT fk_veteriner_personel FOREIGN KEY (personelid) REFERENCES public.klinikpersoneli(personelid) ON DELETE CASCADE;


-- Completed on 2026-02-12 01:00:17

--
-- PostgreSQL database dump complete
--

\unrestrict MaSVQK7XXNYFqzju6lb20Qlg1KHsYjHNJkrWt94srtqDORcltZSQVuBJ1qrMIOw

